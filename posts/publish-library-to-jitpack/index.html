<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.73.0" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="" />
  <meta property="og:url" content="https://coderbuck.github.io/posts/publish-library-to-jitpack/" />
  <link rel="canonical" href="https://coderbuck.github.io/posts/publish-library-to-jitpack/" /><link rel="alternate" type="application/atom+xml" href="https://coderbuck.github.ioindex.xml" title="Buck&#39;s Bolg">

  <script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/coderbuck.github.io"
      },
      "articleSection" : "posts",
      "name" : "Publish Library to Jitpack",
      "headline" : "Publish Library to Jitpack",
      "description" : "之前都是把库发布到 jcenter，所以一直没有碰过 jitpack。最近也是因为发布到 jcenter 遇到了问题，然后才转了 jitpack。用了后就感觉很爽。\njcenter 遇到了啥问题 一般来说发布的jcenter都会用这个插件 com.novoda.bintray-release 。自己新建项目(viewbinding-ktx)gradle版本默认是6.0以上了，然后这个插件就 bug 了，不支持gradle 6.0\u002b ，导致我发布不了。然后我又不想回退到5.0 ，就去试 jitpack 了。\njitpack ！！！ 我对 jitpack 最初的坏印象很简单，就是使用发布到 jitpack 的库，你必须在项目里手动把 jitpack 的仓库加进去:maven { url \u0027https:\/\/jitpack.io\u0027 } ,而jcenter 创建项目的时候自动就配置了，而且还是带别名的jcenter()。但是这不怪 jitpack \u0026hellip;\n发布到 jitpack 的过程真的是超级简单\n添加插件 android library 添加 android-maven 插件\n\/\/ root classpath \u0027com.github.dcendents:android-maven-gradle-plugin:2.1\u0027 \/\/ module apply plugin: \u0027com.github.dcendents.android-maven\u0027  注意：android-maven 现在维护者不推荐使用了，因为现在 android 插件已经默认提供了 aar 工件的支持。 但是现在还是用 android-maven 更方便，但是 android-maven 相对来说要过时了\u0026hellip;\n java library 添加 maven 插件",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "2020",
      "datePublished": "2020-07-11 22:33:05 \u002b0800 \u002b08",
      "dateModified" : "2020-07-11 22:33:05 \u002b0800 \u002b08",
      "url" : "https:\/\/coderbuck.github.io\/posts\/publish-library-to-jitpack\/",
      "keywords" : [  ]
  }
</script>
<title>Publish Library to Jitpack - Buck&#39;s Bolg</title>
  <meta property="og:title" content="Publish Library to Jitpack - Buck&#39;s Bolg" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="之前都是把库发布到 jcenter，所以一直没有碰过 jitpack。最近也是因为发布到 jcenter 遇到了问题，然后才转了 jitpack。用了后就感觉很爽。
jcenter 遇到了啥问题 一般来说发布的jcenter都会用这个插件 com.novoda.bintray-release 。自己新建项目(viewbinding-ktx)gradle版本默认是6.0以上了，然后这个插件就 bug 了，不支持gradle 6.0&#43; ，导致我发布不了。然后我又不想回退到5.0 ，就去试 jitpack 了。
jitpack ！！！ 我对 jitpack 最初的坏印象很简单，就是使用发布到 jitpack 的库，你必须在项目里手动把 jitpack 的仓库加进去:maven { url &#39;https://jitpack.io&#39; } ,而jcenter 创建项目的时候自动就配置了，而且还是带别名的jcenter()。但是这不怪 jitpack &hellip;
发布到 jitpack 的过程真的是超级简单
添加插件 android library 添加 android-maven 插件
// root classpath &#39;com.github.dcendents:android-maven-gradle-plugin:2.1&#39; // module apply plugin: &#39;com.github.dcendents.android-maven&#39;  注意：android-maven 现在维护者不推荐使用了，因为现在 android 插件已经默认提供了 aar 工件的支持。 但是现在还是用 android-maven 更方便，但是 android-maven 相对来说要过时了&hellip;
 java library 添加 maven 插件" />
  <meta name="description" content="之前都是把库发布到 jcenter，所以一直没有碰过 jitpack。最近也是因为发布到 jcenter 遇到了问题，然后才转了 jitpack。用了后就感觉很爽。
jcenter 遇到了啥问题 一般来说发布的jcenter都会用这个插件 com.novoda.bintray-release 。自己新建项目(viewbinding-ktx)gradle版本默认是6.0以上了，然后这个插件就 bug 了，不支持gradle 6.0&#43; ，导致我发布不了。然后我又不想回退到5.0 ，就去试 jitpack 了。
jitpack ！！！ 我对 jitpack 最初的坏印象很简单，就是使用发布到 jitpack 的库，你必须在项目里手动把 jitpack 的仓库加进去:maven { url &#39;https://jitpack.io&#39; } ,而jcenter 创建项目的时候自动就配置了，而且还是带别名的jcenter()。但是这不怪 jitpack &hellip;
发布到 jitpack 的过程真的是超级简单
添加插件 android library 添加 android-maven 插件
// root classpath &#39;com.github.dcendents:android-maven-gradle-plugin:2.1&#39; // module apply plugin: &#39;com.github.dcendents.android-maven&#39;  注意：android-maven 现在维护者不推荐使用了，因为现在 android 插件已经默认提供了 aar 工件的支持。 但是现在还是用 android-maven 更方便，但是 android-maven 相对来说要过时了&hellip;
 java library 添加 maven 插件" />
  <meta property="og:locale" content="zh-cn" />

  <link rel="stylesheet" href="/css/flexboxgrid-6.3.1.min.css" />
  <link rel="stylesheet" href="/css/github-markdown.css" />
  <link rel="stylesheet" href="/css/highlight/tomorrow.min.css" />
  <link rel="stylesheet" href="/css/index.css">

  

  <link href="/index.xml" rel="alternate" type="application/rss+xml"
    title="Buck&#39;s Bolg">
  
  <link href="https://fonts.googleapis.com/css?family=Arvo|Permanent+Marker|Bree+Serif" rel="stylesheet">
  
  

  
</head>

<body>
  <article class="post " id="article">
    <div class="row">
      <div class="col-xs-12">
        <div class="site-header">
          
<header>
  <div class="signatures site-title">
    <a href="/">Coder Buck</a>
  </div>
</header>
<div class="row end-xs">
  
  
</div>
<div class="header-line"></div>

        </div>
        <header class="post-header">
          <h1 class="post-title">Publish Library to Jitpack</h1>
          
          <div class="row post-desc">
            <div class="col-xs-6">
              
              <time class="post-date" datetime="2020-07-11 22:33:05 &#43;08">
                11 Jul 2020
              </time>
              
            </div>
            <div class="col-xs-6">
              
            </div>
          </div>
          
        </header>

        <div class="post-content markdown-body">
          
          <p>之前都是把库发布到 jcenter，所以一直没有碰过 jitpack。最近也是因为发布到 jcenter 遇到了问题，然后才转了 jitpack。用了后就感觉很爽。</p>
<h2 id="jcenter-遇到了啥问题">jcenter 遇到了啥问题</h2>
<p>一般来说发布的jcenter都会用这个插件 <code>com.novoda.bintray-release</code> 。自己新建项目(<a href="https://github.com/CoderBuck/viewbinding-ktx">viewbinding-ktx</a>)gradle版本默认是6.0以上了，然后这个插件就 <a href="https://github.com/novoda/bintray-release/issues/298">bug</a> 了，不支持gradle 6.0+ ，导致我发布不了。然后我又不想回退到5.0 ，就去试 jitpack 了。</p>
<h2 id="jitpack-">jitpack ！！！</h2>
<p>我对 jitpack 最初的坏印象很简单，就是使用发布到 jitpack 的库，你必须在项目里手动把 jitpack 的仓库加进去:<code>maven { url 'https://jitpack.io' }</code> ,而jcenter 创建项目的时候自动就配置了，而且还是带别名的<code>jcenter()</code>。但是这不怪 jitpack &hellip;</p>
<p>发布到 jitpack 的过程真的是超级简单</p>
<h3 id="添加插件">添加插件</h3>
<h4 id="android-library">android library</h4>
<p>添加 android-maven 插件</p>
<pre><code>// root
classpath 'com.github.dcendents:android-maven-gradle-plugin:2.1'

// module
apply plugin: 'com.github.dcendents.android-maven'

</code></pre><blockquote>
<p>注意：android-maven 现在维护者不推荐使用了，因为现在 android 插件已经默认提供了 aar 工件的支持。 但是现在还是用 android-maven 更方便，但是 android-maven 相对来说要过时了&hellip;</p>
</blockquote>
<h4 id="java-library">java library</h4>
<p>添加 maven 插件</p>
<pre><code>apply plugin: 'maven'
</code></pre><blockquote>
<p>注意：官方文档里显示，使用 <code>maven-publish</code>插件也是可以的，但是我自己测试至少 gradle 6.0 的项目不行，这个问题也有人提了 <a href="https://github.com/jitpack/jitpack.io/issues/3814">issue</a>，是默认的 gradlew 脚本出了问题。jitpack官方还是建议使用 <code>maven</code> 插件。但是 gradle 官方是不推荐使用 maven插件了，而是推荐使用 maven-publish 插件&hellip; 所以说，不要管他们推荐啥，先保证能用再说</p>
</blockquote>
<p>最基本的添加了上面的插件就ok，就能顺利发布了。而且发布的时候会默认也把 source.jar 一起发布，所以不需要单独指定 source.jar 工件。</p>
<h3 id="发布">发布</h3>
<p>代码上传到github（gitlab、gitee也支持），然后在github release，比如release 一个 1.0.0 的版本，然后去 jitpack.io 发布就行了</p>
<h2 id="一些坑">一些&quot;坑&rdquo;</h2>
<ol>
<li>项目名</li>
</ol>
<p>比如：<code>implementation 'com.github.coderbuck:viewbinding-ktx:1.0.0</code> , viewbinding-ktx 是项目名，所以这种项目名最好是小写的形式</p>
<ol start="2">
<li>单个项目多个module library</li>
</ol>
<p>比如：https://github.com/CoderBuck/jitpack  这个项目里有两个 library，lib-aar 和 lib-jar。因为他们在同一个项目里，github release 的时候发布的是整体的版本。所以每次发布到 jitpack 的时候，他们两个都是同时发布的，版本号都是相同的，不能单独发布。而且依赖的名字也会有区别，</p>
<pre><code>implementation 'com.github.coderbuck:jitpack:1.0.0  		// lib-aar + lib-jar
implementation 'com.github.coderbuck.jitpack:lib-aar:1.0.0	// lib-aar
implementation 'com.github.coderbuck.jitpack:lib-jar:1.0.0	// lib-jar
</code></pre><p>这就可能会导致一些问题，
1.想要不同版本怎么办？&ndash;再新建一个仓库吧
2.之前项目是一个 library，后面又新增了一个 library，这会导致依赖的名字变化，跟之前版本不符。&ndash;尽量不要这么做</p>
<ol start="3">
<li>发布的东西不方便查看
你需要到 <a href="https://jitpack.io/com/github/CoderBuck/viewbinding-ktx/1.0.0/build.log">build.log</a> 去查看都发布了什么，没有一个统一管理的地方。
比如：</li>
</ol>
<pre><code>Build artifacts:
com.github.CoderBuck:viewbinding-ktx:1.0.0

Files: 
com/github/CoderBuck/viewbinding-ktx/1.0.0
com/github/CoderBuck/viewbinding-ktx/1.0.0/build.log
com/github/CoderBuck/viewbinding-ktx/1.0.0/viewbinding-ktx-1.0.0-sources.jar
com/github/CoderBuck/viewbinding-ktx/1.0.0/viewbinding-ktx-1.0.0.aar
com/github/CoderBuck/viewbinding-ktx/1.0.0/viewbinding-ktx-1.0.0.pom
com/github/CoderBuck/viewbinding-ktx/1.0.0/viewbinding-ktx-1.0.0.pom.md5
com/github/CoderBuck/viewbinding-ktx/1.0.0/viewbinding-ktx-1.0.0.pom.sha1
</code></pre><p>这种是正常的，然后看看 pom 文件的依赖是否正确。</p>
<h2 id="资料">资料</h2>
<p>重复的东西就不写了</p>
<p><a href="https://juejin.im/post/5c2341cdf265da6134387300">JitPack.io 基本使用法</a></p>
<p><a href="https://www.gcssloop.com/course/PublishLibraryByJitPack">使用JitPack发布Android开源库</a></p>
<p><a href="https://github.com/CoderBuck/jitpack">我的demo jitpack</a></p>
<p><a href="https://github.com/Zhuinden/simple-stack/blob/master/simple-stack/build.gradle.kts">simple-stack 是怎么用的</a></p>

        </div>

        <div class="row middle-xs">
          <div class="col-xs-12">
            
            <div class="post-category">
              <a href="//categories/jitpack/">
                jitpack
              </a>
            </div>
            
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            
          </div>
        </div>

        
        

        
        
        <div style="height: 50px;"></div>
        
        

        <div class="site-footer">
  
  <div class="site-footer-item">
    <a href="https://github.com/CoderBuck" target="_blank">Github</a>
  </div>
  
  <div class="site-footer-item">
    <a href="https://twitter.com/D20170806" target="_blank">Twitter</a>
  </div>
  
  
</div>

      </div>
    </div>
  </article>

  <script src="/js/highlight.pack.js"></script>


<script>
  hljs.initHighlightingOnLoad();
  
  
  
    
    
  
</script>

  

</body>

</html>